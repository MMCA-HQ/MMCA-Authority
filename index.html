<script>
    // ... الكود العلوي وإعدادات Firebase ...

    db.ref().on('value', (snap) => {
        const data = snap.val() || {};
        const auth = data.authority_data || {};
        
        // --- ابدأ التعديل هنا لضمان عمل الاستبيانات ---
        
        let sHtml = "";
        const surveysData = auth.surveys; // جلب بيانات الاستبيانات من السحاب

        if (surveysData) {
            for (let id in surveysData) {
                const s = surveysData[id];
                sHtml += `
                <div class="survey-card">
                    <b>دورة: ${s.course}</b>
                    <div class="survey-text">${s.url}</div>
                </div>`;
            }
        } else {
            sHtml = '<p style="color:#666; text-align:center;">لا توجد استبيانات حالياً</p>';
        }

        // وضع المحتوى داخل الـ div المخصص له
        const survContainer = document.getElementById('survDisplay');
        if(survContainer) {
            survContainer.innerHTML = sHtml;
        }

        // --- نهاية تعديل الاستبيانات ---

        // (باقي كود الجداول والمواعيد يكمل هنا...)
    });
</script>
