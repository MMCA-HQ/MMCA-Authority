<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ - Ù…Ø§Ø±ÙÙ„</title>
    <style>
        :root { --army: #3d4921; --gold: #c5a059; --dark: #0b0c08; }
        body { background: var(--dark); color: #fff; font-family: Tahoma; padding: 20px; }
        #loginOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--dark); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .login-box { background: #14160f; border: 1px solid var(--army); padding: 30px; border-radius: 8px; width: 350px; text-align: center; }
        .login-box input { width: 100%; padding: 12px; margin-bottom: 15px; background: #000; border: 1px solid var(--army); color: #fff; text-align: center; border-radius: 4px; }
        .btn-main { background: var(--gold); color: #000; border: none; padding: 12px; width: 100%; cursor: pointer; font-weight: bold; border-radius: 4px; }
        #mainContent { display: none; }
        .panel { background: #14160f; border: 1px solid var(--army); padding: 20px; margin-bottom: 30px; border-radius: 8px; }
        h2 { color: var(--gold); border-right: 5px solid var(--gold); padding-right: 15px; margin-bottom: 20px; }
        input, textarea { background: #000; color: #fff; border: 1px solid #333; padding: 10px; border-radius: 4px; margin: 5px; }
        .log-box { background: #000; height: 300px; overflow-y: auto; padding: 15px; border: 1px solid #222; font-family: monospace; color: #00ff00; }
        .footer { text-align: center; padding: 20px; color: var(--gold); border-top: 1px solid var(--army); }
    </style>
</head>
<body>

<div id="loginOverlay">
    <div class="login-box">
        <h2 style="color:var(--gold)">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</h2>
        <input type="text" id="fakeCode" placeholder="Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ" value="">
        <input type="password" id="realPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button class="btn-main" style="width:100%" onclick="checkAuth()">Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<div id="mainContent">
    <h1 style="text-align: center; color: var(--gold); margin-bottom: 40px;">Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© - Ù…Ø§Ø±ÙÙ„</h1>

    <div class="panel">
        <h2>| Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯ÙˆØ±Ø§Øª (Ø´Ø±ÙˆØ·ØŒ Ù…ÙˆØ§Ø¹ÙŠØ¯ØŒ Ø±ÙˆØ§Ø¨Ø·ØŒ Ø§Ø³ØªØ¨ÙŠØ§Ù†Ø§Øª)</h2>
        <input type="text" id="m_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©">
        <input type="text" id="m_p1" placeholder="Ø§Ù„ÙØªØ±Ø© 1">
        <input type="text" id="m_p2" placeholder="Ø§Ù„ÙØªØ±Ø© 2">
        <input type="text" id="m_exam" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±">
        <input type="text" id="m_corr" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØªØµØ­ÙŠØ­">
        <textarea id="m_survey" placeholder="Ù†Øµ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† Ø§Ù„ÙˆØ§Ø¶Ø­" style="width:90%; height:60px;"></textarea>
        <button class="btn-main" onclick="saveData()">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    </div>

    <div class="panel">
        <h2>| Ø³Ø¬Ù„ Ø§Ù„Ù„ÙˆÙ‚Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ (Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª)</h2>
        <div id="logBox" class="log-box"></div>
    </div>

    <div class="footer">Ø­Ù‚ÙˆÙ‚ - Ø¯ÙˆÙ„Ø© Ù…Ø§Ø±ÙÙ„ | Ù‡ÙŠØ¦Ø© ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¯ÙˆØ±Ø§Øª Â© 2026</div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script>
    const firebaseConfig = { apiKey: "AIzaSyAALZ-v8wA_5mjUVSqW1uLXMwMkskpDaGM", databaseURL: "https://mmca-authority-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function pushLog(msg) { db.ref('system_logs').push({ msg, time: new Date().toLocaleString('ar-SA') }); }

    function checkAuth() {
        if (document.getElementById('realPass').value === "Ø±Ø¦ÙŠØ³_2026") {
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            pushLog(`ğŸ‘‘ Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­ Ù„Ù„Ø±Ø¦ÙŠØ³`);
        } else {
            pushLog(`âš ï¸ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø© Ù„Ù„Ø±Ø¦ÙŠØ³! Ø§Ù„ÙƒÙˆØ¯: (${document.getElementById('fakeCode').value || 'ÙØ§Ø±Øº'})`);
            alert("Ø®Ø·Ø£");
        }
    }

    function saveData() {
        const name = document.getElementById('m_name').value;
        const data = { 
            name, p1: document.getElementById('m_p1').value, p2: document.getElementById('m_p2').value,
            exam: document.getElementById('m_exam').value, corr: document.getElementById('m_corr').value, survey: document.getElementById('m_survey').value
        };
        db.ref('authority_data/assets/'+name).set(data);
        db.ref('authority_data/courses/'+name).set({name, p1: data.p1, p2: data.p2});
        pushLog(`ğŸ› ï¸ Ø§Ù„Ø±Ø¦ÙŠØ³ Ø¹Ø¯Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯ÙˆØ±Ø©: ${name}`);
    }

    db.ref('system_logs').on('value', (snap) => {
        let hL = "";
        const logs = snap.val() || {};
        Object.values(logs).reverse().slice(0, 100).forEach(l => hL += `<div>[${l.time}] ${l.msg}</div>`);
        document.getElementById('logBox').innerHTML = hL;
    });
</script>
</body>
</html>
