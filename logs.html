<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³</title>
    <style>
        :root { --army: #3d4921; --gold: #c5a059; --dark: #0b0c08; }
        body { background: var(--dark); color: #fff; font-family: Tahoma; padding: 20px; }
        .panel { background: #14160f; border: 1px solid var(--army); padding: 20px; margin-bottom: 25px; border-radius: 8px; }
        input, textarea { background:#000; color:#fff; border:1px solid #333; padding:10px; margin:5px; border-radius:5px; }
        .btn-main { background:var(--gold); border:none; padding:10px 20px; font-weight:bold; cursor:pointer; }
        .log-box { background:#000; height:300px; overflow-y:scroll; padding:15px; color:#00ff00; border:1px solid #333; font-family:monospace; }
    </style>
</head>
<body>
    <div id="loginOverlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--dark); display:flex; align-items:center; justify-content:center; z-index:999;">
        <div style="background:#14160f; padding:30px; border:1px solid var(--army); text-align:center;">
            <h2 style="color:var(--gold)">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙŠØ§</h2>
            <input type="password" id="resPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="width:100%">
            <button onclick="login()" class="btn-main" style="width:100%; margin-top:10px;">Ø¯Ø®ÙˆÙ„</button>
        </div>
    </div>

    <div id="resContent" style="display:none;">
        <h1>Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ - Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø©</h1>

        <div class="panel">
            <h2>| Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø±ÙˆØ·</h2>
            <textarea id="rulesInput" style="width:90%; height:60px;"></textarea><br>
            <button class="btn-main" onclick="db.ref('data/rules').set(document.getElementById('rulesInput').value)">Ø­ÙØ¸ Ø§Ù„Ø´Ø±ÙˆØ·</button>
        </div>

        <div class="panel">
            <h2>| Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯</h2>
            <input type="text" id="c_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©">
            <input type="text" id="c_p1" placeholder="Ù1">
            <input type="text" id="c_p2" placeholder="Ù2">
            <button class="btn-main" onclick="saveData('courses', {name:document.getElementById('c_name').value, p1:document.getElementById('c_p1').value, p2:document.getElementById('c_p2').value}, 'c_name')">Ø­ÙØ¸/ØªØ­Ø¯ÙŠØ«</button>
            <div id="res_courses_table"></div>
        </div>

        <div class="panel">
            <h2>| Ø³Ø¬Ù„ Ø§Ù„Ù„ÙˆÙ‚Ø§Øª (Ø¯Ø§Ø¦Ù…)</h2>
            <div id="logBox" class="log-box"></div>
        </div>
    </div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script>
    const firebaseConfig = { apiKey: "AIzaSyAALZ-v8wA_5mjUVSqW1uLXMwMkskpDaGM", databaseURL: "https://mmca-authority-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function login() {
        if(document.getElementById('resPass').value === "Ø±Ø¦ÙŠØ³_2026") {
            document.getElementById('loginOverlay').style.display='none';
            document.getElementById('resContent').style.display='block';
            db.ref('logs').push({ msg: "ğŸ‘‘ Ø§Ù„Ø±Ø¦ÙŠØ³ Ø¯Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…", time: new Date().toLocaleString('ar-SA') });
        } else { alert("Ø®Ø·Ø£"); }
    }

    function saveData(path, data, resetId) {
        db.ref(path+'/'+data.name).set(data);
        db.ref('logs').push({ msg: `ğŸ› ï¸ Ø§Ù„Ø±Ø¦ÙŠØ³ Ø£Ø¶Ø§Ù/Ø¹Ø¯Ù„ ÙÙŠ ${path}: ${data.name}`, time: new Date().toLocaleString('ar-SA') });
        document.getElementById(resetId).value = "";
    }

    db.ref().on('value', snap => {
        const val = snap.val() || {};
        let hLog = "";
        const logs = Object.values(val.logs || {}).reverse();
        logs.forEach(l => hLog += `<div>[${l.time}] ${l.msg}</div>`);
        document.getElementById('logBox').innerHTML = hLog;
    });
</script>
</body>
</html>
